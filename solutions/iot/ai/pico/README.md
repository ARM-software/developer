# The Pico Project

Object Detection & Text Analytics Made Simple using Docker, Apache Kafka, IoT & Amazon Rekognition System

![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/thepicoproject1.png "My Image")

## Table of Contents

1. [Intent](#Intent)
2. [Hardware](#hardware)
3. [Software](#Software)
4. [Installation](#Installation)
5. [Setup](#Setup)
6. [How to run the program](#How-to-run-the-program)
7. [About](#About)
8. [License](#License)
9. [Contribute](#Contribute)
10. [Credits](#Credits)
11. [More](#More)

## Intent:

The intention with this project is to showcase how easy it is to implement object detection and analytics using Docker containers.Imagine you are able to capture live video streams, identify objects using deep learning, and then trigger actions or notifications based on the identified objects - all using Docker containers. With Pico, you will be able to setup and run a live video capture, analysis, and alerting solution prototype.

![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/pico-project-arch.png)

                            
A camera surveils a particular area, streaming video over the network to a video capture client. The client samples video frames and sends them over to AWS, where they are analyzed and stored along with metadata. If certain objects are detected in the analyzed video frames, SMS alerts are sent out. Once a person receives an SMS alert, they will likely want to know what caused it. For that, sampled video frames can be monitored with low latency using a web-based user interface.

The Pico framework uses Kafka cluster to acquire data in real-time. Kafka is a message-based distributed publish-subscribe system, which has the advantages of high throughput and perfect fault-tolerant mechanism. The type of data source is the video that generated by the cameras attached to Raspberry Pi. 


![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/pico_in_3_steps.png)




## Hardware 

|Items        |   Link        | Reference  |
| ------------- |:-------------:| -----:|
| Raspberry Pi 3 Model B| [Buy](https://robu.in/product/latest-raspberry-pi-3-model-b-original/ref/60/) | ![Buy](https://github.com/collabnix/pico/blob/master/images/pibox.png) |
| Raspberry Pi Infrared IR Night Vision Surveillance Camera Module 500W Webcam | [Buy](https://robu.in/product/raspberry-pi-infrared-ir-night-vision-surveillance-camera-module-500w-webcam/ref/60/) | ![Buy](https://github.com/collabnix/pico/blob/master/images/picbox2.png/)| 
| 5MP Raspberry Pi 3 Camera Module W/ HBV FFC Cable | [Buy](https://robu.in/product/5mp-raspberry-pi-camera-module-w-hbv-ffc-cable/ref/60) | ![Buy](https://github.com/collabnix/pico/blob/master/images/pibox3.png)| 



![alt text](https://github.com/collabnix/pico/blob/master/images/pico2.png)


# Software

1. Raspberry Pi OS
2. Docker 19.03.x
3. Python 
4. Amazon Cloud Subscription
5. AWS Rekognition Service

## Docker on Raspberry Pi

### 1. Preparing Your Raspberry Pi

Raspberry Pi OS (previously called Raspbian) is an official operating system for all models of the Raspberry Pi. We will be using Raspberry Pi Imager for an easy way to install Raspberry Pi OS on top of Raspberry Pi:

Visit https://www.raspberrypi.org/downloads/raspberry-pi-os/ and download Raspberry Pi OS by running the below CLI:

![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/install1.png "My Image")

In case you are in hurry, just run the below command and you should be good to go:

wget https://downloads.raspberrypi.org/raspios_full_armhf_latest


### Using Raspberry Pi Imager

Next, we will be installing Raspberry Pi Imager. You can download via https://www.raspberrypi.org/blog/raspberry-pi-imager-imaging-utility/

![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/install2.png "My Image")

All you need to do is choose the right operating system and SD card, and it should be able to flash OS on your SD card.

![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/install3.png "My Image")


Click “Write” and it’s time to grab a coffee.

![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/install4.png "My Image")

Once the write is successful, you can remove the SD card from card reader and then insert it into Raspberry Pi SD card slot.

![alt text](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/images/install6.png "My Image")

```
$ssh pi@192.168.1.7$ssh pi @192.168.1.4
pi@raspberrypi:~ $ uname -arn
Linux raspberrypi 4.19.118-v7+ #1311 SMP Mon Apr 27 14:21:24 BST 2020 armv7l GNU/Linuxpi@raspberrypi:~ $
```

### Installing Docker 19.03 on each Pi nodes

```
sudo curl -sSL https://get.docker.com/ | sh
```

```
pi@raspi2:~ $ docker version
Client: Docker Engine - Community 
Version:           19.03.4 
API version:       1.40 
Go version:        go1.12.10 
Git commit:        9013bf5 
Built:             Fri Oct 18 16:03:00 2019 
OS/Arch:           linux/arm 
Experimental:      false

Server: Docker Engine - Community Engine:  
Version:          19.03.8  
API version:      1.40 (minimum version 1.12)  
Go version:       go1.12.17  
Git commit:       afacb8b  
Built:            Wed Mar 11 01:29:22 2020  OS/Arch:          linux/arm  Experimental:     false 
containerd:  Version:          1.2.10  
GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339 
runc:  Version:          1.0.0-rc8+dev  
GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657 docker-init:  
Version:          0.18.0  
GitCommit:        fec368
pi@raspi2:~ $
```



## Apache Kafka on AWS Cloud

- [Setting up 2-Node Docker Swarm Cluster on AWS Cloud](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/blob/master/workshop/setting-up-docker-swarm-on-aws.md)
- [Building Apache Kafka on 2-Node Docker Swarm Cluster](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/blob/master/workshop/running-kafka-on-swarm-cluster.md)


## Setting up Pico 

- [Running Consumer Scripts on AWS Cloud Instance](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/blob/master/workshop/running-consumer-script.md)
- [Running Producer Script on Raspberry Pi](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/blob/master/workshop/running-producer-script-on-pi.md)

## Testing Object Detection

- [Performing Text Analytics](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/blob/master/workshop/performing-object-detection.md)rn-your-raspberrypi-into-camera.md)
- [Performing Object Detection](https://github.com/ajeetraina/developer/blob/master/solutions/iot/ai/pico/blob/master/workshop/performing-object-detection.md)rn-your-raspberrypi-into-camera.md))







